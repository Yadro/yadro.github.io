{"version":3,"sources":["app.tsx"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["///<reference path=\"../typings/index.d.ts\"/>\r\n\r\nimport * as React from 'react';\r\n//noinspection TypeScriptCheckImport\r\nimport * as ReactDOM from 'react-dom';\r\nimport InputMatrix from 'components/inputMatrix'\r\nimport {MatrixM} from 'helper/matrix';\r\nimport Fraction = require('fraction');\r\nimport {Graph} from './components/graph';\r\nimport {SimplexMatrix} from './components/simplexMatrix'\r\nimport {Simplex} from './helper/simplex'\r\nimport {getArrIndex} from \"./helper/tools\";\r\nimport PrintEquationComp from \"./components/printEquation\";\r\nimport {uploadFile} from './helper/fileLoad';\r\nimport Help from \"./components/help\";\r\n\r\ninterface AppS {\r\n    matrix: MatrixM;\r\n    simplex;\r\n    log;\r\n    bystep;\r\n    oninput;\r\n    end;\r\n    polynom;\r\n}\r\n\r\nclass App extends React.Component<any, AppS> {\r\n\r\n    simplex: Simplex;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            matrix: null,\r\n            polynom: null,\r\n            simplex: null,\r\n            log: [],\r\n            bystep: true,\r\n            oninput: true,\r\n            end: false,\r\n        };\r\n    }\r\n\r\n    calc(matrix, polynom) {\r\n        const bystep = this.state.bystep;\r\n        this.simplex = new Simplex(polynom, matrix, bystep);\r\n        if (!bystep) {\r\n            this.simplex.calc();\r\n        }\r\n        this.setState({\r\n            simplex: this.simplex,\r\n            log: this.simplex.debug,\r\n            oninput: false\r\n        } as AppS);\r\n    }\r\n\r\n    onPrev() {\r\n        let res = this.simplex.prev();\r\n        this.setState({\r\n            log: this.simplex.debug,\r\n            end: false\r\n        } as AppS);\r\n    }\r\n\r\n    onNext(pos?) {\r\n        let res = this.simplex.next(pos);\r\n        this.setState({\r\n            log: this.simplex.debug,\r\n            end: res\r\n        } as AppS);\r\n    }\r\n\r\n    onSelectReference(e: string) {\r\n        const pos = e.split('x');\r\n        if (pos.length != 2) {\r\n            throw new Error('SimplexMatrix: incorrect matrix element');\r\n        }\r\n        const pos_ = pos.map(el => +el);\r\n        try {\r\n            this.onNext(pos_);\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    }\r\n\r\n    onClickCheckbox(e) {\r\n        this.setState({bystep: e.target.checked} as AppS);\r\n    }\r\n\r\n    onUploadFile(obj) {\r\n        this.setState({\r\n            matrix: obj.matrix,\r\n            polynom: obj.polynom\r\n        } as AppS);\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div>\r\n                <Help />\r\n                <input type=\"file\" id=\"files\" name=\"files[]\"\r\n                       onChange={uploadFile.bind(null, this.onUploadFile.bind(this))}/>\r\n                <InputMatrix\r\n                    callback={this.calc.bind(this)}\r\n                    showCalc={this.state.oninput}\r\n                    matrix={this.state.matrix}\r\n                    polynom={this.state.polynom}\r\n                />\r\n                {this.state.oninput && false ?\r\n                    <span>\r\n                        <input id=\"checkbox\" type=\"checkbox\" onChange={this.onClickCheckbox.bind(this)}/>\r\n                        <label htmlFor=\"checkbox\">по шагам</label>\r\n                    </span> : null}\r\n\r\n                <SimplexMatrix log={this.state.log}\r\n                               callback={this.onSelectReference.bind(this)}\r\n                               lastIsTouchable=\"false\"/>\r\n                {!this.state.oninput && !this.state.end ?\r\n                    <span>\r\n                        <button onClick={this.onPrev.bind(this)}>back</button>\r\n                        <button onClick={this.onNext.bind(this, undefined)}>next</button>\r\n                    </span> : null}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nReactDOM.render(<App/>, document.querySelector('.react'));\r\n"],"sourceRoot":"/source/"}